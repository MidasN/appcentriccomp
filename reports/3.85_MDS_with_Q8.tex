\documentclass[]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
\else % if luatex or xelatex
  \ifxetex
    \usepackage{mathspec}
  \else
    \usepackage{fontspec}
  \fi
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
  \newcommand{\euro}{€}
    \setmainfont[]{DejaVu Sans}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\usepackage[margin=1in]{geometry}
\usepackage{hyperref}
\PassOptionsToPackage{usenames,dvipsnames}{color} % color is loaded by hyperref
\hypersetup{unicode=true,
            pdftitle={Untitled},
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{{#1}}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{{#1}}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{{#1}}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{{#1}}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{{#1}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{{#1}}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{{#1}}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{{#1}}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{{#1}}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{{#1}}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{{#1}}}
\newcommand{\ImportTok}[1]{{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{{#1}}}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{{#1}}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{{#1}}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{{#1}}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{{#1}}}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{{#1}}}}
\newcommand{\BuiltInTok}[1]{{#1}}
\newcommand{\ExtensionTok}[1]{{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{{#1}}}
\newcommand{\RegionMarkerTok}[1]{{#1}}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{{#1}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{{#1}}}}
\newcommand{\NormalTok}[1]{{#1}}
\usepackage{longtable,booktabs}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{0}

%%% Use protect on footnotes to avoid problems with footnotes in titles
\let\rmarkdownfootnote\footnote%
\def\footnote{\protect\rmarkdownfootnote}

%%% Change title format to be more compact
\usepackage{titling}

% Create subtitle command for use in maketitle
\newcommand{\subtitle}[1]{
  \posttitle{
    \begin{center}\large#1\end{center}
    }
}

\setlength{\droptitle}{-2em}
  \title{Untitled}
  \pretitle{\vspace{\droptitle}\centering\huge}
  \posttitle{\par}
  \author{}
  \preauthor{}\postauthor{}
  \date{}
  \predate{}\postdate{}


% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi


\begin{document}
\maketitle

\section{I am adding Q8v\_2\_* questions to MDS in this
Script}\label{i-am-adding-q8vux5f2ux5f-questions-to-mds-in-this-script}

\subsection{Q4-Q7 are questions regarding soft on different
devices}\label{q4-q7-are-questions-regarding-soft-on-different-devices}

\subsection{DF with all the software
items}\label{df-with-all-the-software-items}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{source}\NormalTok{(knitr::}\KeywordTok{purl}\NormalTok{(}\StringTok{"1_.Rmd"}\NormalTok{, }\DataTypeTok{output =} \KeywordTok{tempfile}\NormalTok{(), }\DataTypeTok{documentation =} \DecValTok{0}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## 
## processing file: 1_.Rmd
\end{verbatim}

\begin{verbatim}
## 
  |                                                                       
  |                                                                 |   0%
  |                                                                       
  |......                                                           |   9%
  |                                                                       
  |............                                                     |  18%
  |                                                                       
  |..................                                               |  27%
  |                                                                       
  |........................                                         |  36%
  |                                                                       
  |..............................                                   |  45%
  |                                                                       
  |...................................                              |  55%
  |                                                                       
  |.........................................                        |  64%
  |                                                                       
  |...............................................                  |  73%
  |                                                                       
  |.....................................................            |  82%
  |                                                                       
  |...........................................................      |  91%
  |                                                                       
  |.................................................................| 100%
\end{verbatim}

\begin{verbatim}
## output file: /tmp/RtmpSBmqoc/file63427caae846
\end{verbatim}

\begin{verbatim}
## -- Attaching packages ---------------------------------- tidyverse 1.2.1 --
\end{verbatim}

\begin{verbatim}
## √ ggplot2 2.2.1     √ purrr   0.2.4
## √ tibble  1.3.4     √ dplyr   0.7.4
## √ tidyr   0.7.2     √ stringr 1.2.0
## √ readr   1.1.1     √ forcats 0.2.0
\end{verbatim}

\begin{verbatim}
## -- Conflicts ------------------------------------- tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()
\end{verbatim}

\begin{verbatim}
## 
## Attaching package: 'reshape'
\end{verbatim}

\begin{verbatim}
## The following object is masked from 'package:dplyr':
## 
##     rename
\end{verbatim}

\begin{verbatim}
## The following objects are masked from 'package:tidyr':
## 
##     expand, smiths
\end{verbatim}

\begin{verbatim}
## 
## Attaching package: 'magrittr'
\end{verbatim}

\begin{verbatim}
## The following object is masked from 'package:purrr':
## 
##     set_names
\end{verbatim}

\begin{verbatim}
## The following object is masked from 'package:tidyr':
## 
##     extract
\end{verbatim}

\begin{verbatim}
## Parsed with column specification:
## cols(
##   RecordNo = col_integer(),
##   q = col_character(),
##   a = col_character()
## )
\end{verbatim}

\begin{verbatim}
## Warning in rbind(names(probs), probs_f): number of columns of result is not
## a multiple of vector length (arg 1)
\end{verbatim}

\begin{verbatim}
## Warning: 6 parsing failures.
## row # A tibble: 5 x 5 col     row      col               expected actual expected   <int>    <chr>                  <chr>  <chr> actual 1  2651 RecordNo no trailing characters     e3 file 2  2652 RecordNo no trailing characters     e3 row 3  2653 RecordNo no trailing characters     e3 col 4  4470 RecordNo no trailing characters     e3 expected 5  5760 RecordNo no trailing characters     e3 actual # ... with 1 more variables: file <chr>
## ... ................. ... .............................................. ........ .............................................. ...... .............................................. .... .............................................. ... .............................................. ... .............................................. ........ .............................................. ...... .......................................
## See problems(...) for more details.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(tidyverse)}
\KeywordTok{library}\NormalTok{(magrittr)}
\KeywordTok{library}\NormalTok{(tidyLPA)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## tidyLPA provides the functionality to carry out Latent Profile Analysis. Note that tidyLPA is still at the beta stage! 
## Please report any bugs at https://github.com/jrosen48/tidyLPA or send an email to jrosen@msu.edu.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(ggplot2)}
\KeywordTok{library}\NormalTok{(ggpubr)}

\KeywordTok{library}\NormalTok{(mclust)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Package 'mclust' version 5.4.1
## Type 'citation("mclust")' for citing this R package in publications.
\end{verbatim}

\begin{verbatim}
## 
## Attaching package: 'mclust'
\end{verbatim}

\begin{verbatim}
## The following object is masked from 'package:purrr':
## 
##     map
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(forcats)}
\KeywordTok{library}\NormalTok{(hrbrthemes)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## NOTE: Either Arial Narrow or Roboto Condensed fonts are *required* to use these themes.
\end{verbatim}

\begin{verbatim}
##       Please use hrbrthemes::import_roboto_condensed() to install Roboto Condensed and
\end{verbatim}

\begin{verbatim}
##       if Arial Narrow is not on your system, please see http://bit.ly/arialnarrow
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{source}\NormalTok{(}\StringTok{"./functions.R"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Showing job shifts in connection with associated software is not
possible due to NAs in Q21\_1\_open (previous job) TODO: transition
plots for jobs TODO: transition plots for education

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df_clean$Q18_1_open %>%}\StringTok{ }\KeywordTok{as.factor}\NormalTok{() %>%}\StringTok{ }\KeywordTok{summary}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                                                   Lærer 
##                         183                          19 
##                     Pædagog                Projektleder 
##                          15                          11 
##               Sygeplejerske                    Direktør 
##                          10                           9 
##               Socialpædagog             Folkeskolelærer 
##                           9                           8 
##                   Konsulent                       Leder 
##                           7                           7 
##                      Lektor              Socialrådgiver 
##                           7                           7 
##                  Underviser               Chefkonsulent 
##                           7                           6 
##                  Fuldmægtig              Afdelingsleder 
##                           6                           5 
##                     pædagog               Sagsbehandler 
##                           5                           5 
##            Specialkonsulent               sygeplejerske 
##                           5                           5 
##              Systemudvikler                     Advokat 
##                           5                           4 
##                   Bogholder                         CEO 
##                           4                           4 
##                    direktør               Fysioterapeut 
##                           4                           4 
##                       lærer                       leder 
##                           4                           4 
##                     Revisor                    Souschef 
##                           4                           4 
##               Administrator               afdelingschef 
##                           3                           3 
##               Bioanalytiker                         CFO 
##                           3                           3 
##                        Ejer                HR-konsulent 
##                           3                           3 
##                    ingeniør                  Jordemoder 
##                           3                           3 
##                  Journalist          Juridisk konsulent 
##                           3                           3 
##                    Laborant                        Læge 
##                           3                           3 
##                     Partner              PhD studerende 
##                           3                           3 
##                    Redaktør Social og sundhedsassistent 
##                           3                           3 
##              Social pædagog         Studentermedhjælper 
##                           3                           3 
##                  Supervisor                    Tekniker 
##                           3                           3 
##          Udviklingsingeniør              afdelingsleder 
##                           3                           2 
##       Akademisk medarbejder                     Analyst 
##                           2                           2 
##                  Analytiker                    Arkitekt 
##                           2                           2 
##                   Assistent                     betjent 
##                           2                           2 
##         Business Controller                  Butikschef 
##                           2                           2 
##                  Byggeleder            Category Manager 
##                           2                           2 
##                         Ceo                        chef 
##                           2                           2 
##                        Chef           Community manager 
##                           2                           2 
##                  Controller                    Director 
##                           2                           2 
##                 driftsleder                 Driftsleder 
##                           2                           2 
##                     Formand                  fuldmægtig 
##                           2                           2 
##                    Indkøber                    Ingeniør 
##                           2                           2 
##            intern konsulent                It konsulent 
##                           2                           2 
##                     Købmand     Kommunikationskonsulent 
##                           2                           2 
##   Kommunikationsmedarbejder                   konsulent 
##                           2                           2 
##                 Produktchef                  Programmør 
##                           2                           2 
##          Regnskabsansvarlig                Risk manager 
##                           2                           2 
##                 selvstændig              Senior Manager 
##                           2                           2 
##                Skolepædagog               socialpædagog 
##                           2                           2 
##            Softwareudvikler              Sosu assistent 
##                           2                           2 
##            specialkonsulent        System administrator 
##                           2                           2 
##                   teamleder              Tekstforfatter 
##                           2                           2 
##              Tilsynsførende         Udviklingskonsulent 
##                           2                           2 
##                 Underwriter                   Værkfører 
##                           2                           2 
##                           -                     (Other) 
##                           1                         486
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df_clean$Q21_1_open %>%}\StringTok{ }\KeywordTok{as.factor}\NormalTok{() %>%}\StringTok{ }\KeywordTok{summary}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                                            
##                                        989 
##                       category coordinator 
##                                          1 
##                                   Direktør 
##                                          1 
##                 direktør i egen virksomhed 
##                                          1 
##                            Folkeskolelærer 
##                                          1 
##                                 Freelancer 
##                                          1 
##                           Freelance writer 
##                                          1 
##                                 fuldmægtig 
##                                          1 
##                                 head of IT 
##                                          1 
##                             Holdunderviser 
##                                          1 
##                     it-supporter/konsulent 
##                                          1 
##                            Klinisk diætist 
##                                          1 
##                         Konsulent cand jur 
##                                          1 
##                       Kunderådgiver - bank 
##                                          1 
##                           Kunðeservicechef 
##                                          1 
##                                       Læge 
##                                          1 
##                                     Lektor 
##                                          1 
##                       MARKETINGKOORDINATOR 
##                                          1 
##                                     Mentor 
##                                          1 
##                                   Overlæge 
##                                          1 
##                                    pædagog 
##                                          1 
##                                    Pædagog 
##                                          1 
##                                prakt. læge 
##                                          1 
##                            Projektvejleder 
##                                          1 
##                        Rengøringsassistent 
##                                          1 
##                                 Studerende 
##                                          3 
##                              Taxa chauffør 
##                                          1 
##                         Turismemedarbejder 
##                                          1 
##                                 Underviser 
##                                          1 
## Undervisningsassistent/Kandidat studerende 
##                                          1 
##                                      Vikat 
##                                          1
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df_clean$profile_education %>%}\StringTok{ }\NormalTok{summary}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    1.00    5.00    6.00    5.71    7.00    9.00
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# Q18_1_open:Q18_a - job title + tasks description}
\CommentTok{# Q21_1_open:Q22 - previous job titles + tasks description}
\end{Highlighting}
\end{Shaded}

Here I am excluding timing columns

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df_clean %<>%}
\StringTok{  }\NormalTok{dplyr::}\KeywordTok{select}\NormalTok{(-}\KeywordTok{c}\NormalTok{(page_pSC1_timing:tot_time))}

\CommentTok{# df_clean %>% nrow}
\NormalTok{na_vector =}\StringTok{ }\KeywordTok{apply}\NormalTok{(df_clean, }\DecValTok{2}\NormalTok{, function(x)\{}

  \KeywordTok{sum}\NormalTok{(}\KeywordTok{is.na}\NormalTok{(x))}

\NormalTok{\})}

\NormalTok{na_vector[na_vector >}\StringTok{ }\DecValTok{0}\NormalTok{] }\CommentTok{# which variables produce most of the NAs}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                      Q85_1_1                      Q85_1_2 
##                          786                          786 
##                      Q85_1_3                      Q85_1_4 
##                          786                          786 
##                      Q85_1_6                      Q85_1_5 
##                          786                          786 
##                      Q85_2_1                      Q85_2_2 
##                          786                          786 
##                      Q85_2_3                      Q85_2_4 
##                          786                          786 
##                      Q85_2_6                      Q85_2_5 
##                          786                          786 
##                      Q85_3_1                      Q85_3_2 
##                          786                          786 
##                      Q85_3_3                      Q85_3_4 
##                          786                          786 
##                      Q85_3_6                      Q85_3_5 
##                          786                          786 
##                      Q85_4_1                      Q85_4_2 
##                          786                          786 
##                      Q85_4_3                      Q85_4_4 
##                          786                          786 
##                      Q85_4_6                      Q85_4_5 
##                          786                          786 
##                          Q18                          Q19 
##                           46                           46 
##                          Q20                          Q21 
##                          183                          975 
##                          Q23                          Q24 
##                          975                          989 
## qualityControl_overall_scale 
##                            1
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df_final =}\StringTok{ }\NormalTok{df_clean %>%}\StringTok{ }\NormalTok{dplyr::}\KeywordTok{select}\NormalTok{(}
                                      \KeywordTok{names}\NormalTok{(na_vector[na_vector ==}\StringTok{ }\DecValTok{0}\NormalTok{]),}
                                      \NormalTok{-Occupation_Num, -status, -Occupation_DISCO,}
                                      \NormalTok{-}\KeywordTok{c}\NormalTok{(Q85a_1_1, Q85a_2_1, Q85a_3_1, Q85a_4_1),}
                                      \NormalTok{-}\KeywordTok{c}\NormalTok{(Q21_1_open, Q22),}
                                      \NormalTok{-}\KeywordTok{c}\NormalTok{(Q18_1_open, Q18a),}
                                      \NormalTok{-}\KeywordTok{c}\NormalTok{(comments, Q4, Q5, Q6, Q7))}


\NormalTok{df_final %>%}\StringTok{ }\NormalTok{nrow}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 1021
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df_final %>%}\StringTok{ }\NormalTok{ncol}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 28
\end{verbatim}

Based on the info about NAs in the following chunk I updated columns.csv
UPD: not necessary right now

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# FIXME: ?set not_mentioned?}

\CommentTok{# Q24 - what industry do you work in}
\CommentTok{# Q21 - what was your last (main) job titled}
\CommentTok{# Q23 Did you work in the public or private sector}
\CommentTok{# Q85_4_5: Mobile phone: other}
\CommentTok{# Q85_4_6: Mobile phone: Blackbery OS}

\CommentTok{# Less than 150 NAs:}
\CommentTok{# Q20 - what industry do you work in}
\CommentTok{# Q18 - what is your position/job title}
\CommentTok{# Q19 - do you work in a public/private sector}
\end{Highlighting}
\end{Shaded}

Reordering variables to make values semi-continuous

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df_final$Q9[df_final$Q9 ==}\StringTok{ }\DecValTok{4}\NormalTok{] =}\StringTok{ }\DecValTok{0}
\NormalTok{df_final$Q10[df_final$Q10 ==}\StringTok{ }\DecValTok{4}\NormalTok{] =}\StringTok{ }\DecValTok{0}
\NormalTok{df_final$Q11[df_final$Q11 ==}\StringTok{ }\DecValTok{4}\NormalTok{] =}\StringTok{ }\DecValTok{0}
\NormalTok{df_final$Q12[df_final$Q12 ==}\StringTok{ }\DecValTok{4}\NormalTok{] =}\StringTok{ }\DecValTok{0}
\NormalTok{df_final$Q13[df_final$Q13 ==}\StringTok{ }\DecValTok{4}\NormalTok{] =}\StringTok{ }\DecValTok{0}
\NormalTok{df_final$Q14[df_final$Q14 ==}\StringTok{ }\DecValTok{4}\NormalTok{] =}\StringTok{ }\DecValTok{0}
\NormalTok{df_final$Q15[df_final$Q15 ==}\StringTok{ }\DecValTok{4}\NormalTok{] =}\StringTok{ }\DecValTok{0}
\NormalTok{df_final$Q16[df_final$Q16 ==}\StringTok{ }\DecValTok{4}\NormalTok{] =}\StringTok{ }\DecValTok{0}

\NormalTok{df_final$Q17_R =}\StringTok{ }\DecValTok{6} \NormalTok{-}\StringTok{ }\NormalTok{df_final$Q17}
\end{Highlighting}
\end{Shaded}

Description of items for LPA

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# Q1 - language}

\CommentTok{# TODO: ask about numbers}
\CommentTok{# Q3_1 - Desktop}
\CommentTok{# Q3_2 - Laptop}
\CommentTok{# Q3_3 - Tablet}
\CommentTok{# Q3_4 - Mobile phone/Smartphone}
\CommentTok{#}

\CommentTok{# Q8_v2_1 - Built-in default settings}
\CommentTok{# Q8_v2_2 - Plugins/add-ons/extensions}
\CommentTok{# Q8_v2_3 - Script to extend Software}
\CommentTok{# Q8_v2_4 - I reprogram}

\CommentTok{# Traditional Surveys}
\CommentTok{# Q9 - digital collaboration skills}
\CommentTok{# Q10 - digital communication skills}
\CommentTok{# Q11 - production of digital content}
\CommentTok{# Q12 - formatting/edditing skills}
\CommentTok{# Q13 - programming languages knowledge}
\CommentTok{# Q14 - problem-solving skills produced by digital technologies}
\CommentTok{# Q15 - understanding of underlying logic of software and problem-solving}
\CommentTok{# Q16 - updating IT skills}


\CommentTok{# Q17_R - employment }
\end{Highlighting}
\end{Shaded}

\section{Here I am filtering software out of the top
9}\label{here-i-am-filtering-software-out-of-the-top-9}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{jobtitleanddescription <-}\StringTok{ }\NormalTok{df_clean[, }\KeywordTok{c}\NormalTok{(}\StringTok{"RecordNo"}\NormalTok{, }\StringTok{"Q18_1_open"}\NormalTok{, }\StringTok{"Q18a"}\NormalTok{, }\StringTok{"Occupation_DISCO"}\NormalTok{, }\StringTok{"Occupation"}\NormalTok{)]}


\NormalTok{merged <-}\StringTok{ }\KeywordTok{merge}\NormalTok{(}\DataTypeTok{x =} \NormalTok{software_cleaned[!(software_cleaned$a2 %in%}\StringTok{ }\NormalTok{(software_aggregated %>%}\StringTok{ }\KeywordTok{top_n}\NormalTok{(}\DecValTok{9}\NormalTok{, n) %$%}\StringTok{ }\NormalTok{a2)),], }\CommentTok{# throwing away top 9}
                \DataTypeTok{y =} \NormalTok{jobtitleanddescription,}
                \DataTypeTok{by =} \StringTok{"RecordNo"}\NormalTok{) %>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(-a, -Q18_1_open, -Q18a, -Occupation_DISCO)}
\end{Highlighting}
\end{Shaded}

\section{\texorpdfstring{TODO: remake the table with a \texttt{q} per
\texttt{a2}}{TODO: remake the table with a q per a2}}\label{todo-remake-the-table-with-a-q-per-a2}

\section{FIXME: what I was doing wrong before I have not excluded
repeated items per
respondent}\label{fixme-what-i-was-doing-wrong-before-i-have-not-excluded-repeated-items-per-respondent}

\section{Fixing it}\label{fixing-it}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{merged_quas =}\StringTok{ }\NormalTok{merged[!}\KeywordTok{is.na}\NormalTok{(merged$a2), ] %>%}\StringTok{ }\CommentTok{# removing NA's from the a column}
\StringTok{  }\NormalTok{dplyr::}\KeywordTok{rename}\NormalTok{(}\DataTypeTok{a =} \NormalTok{a2) %>%}\StringTok{ }\CommentTok{# FIXME: loosing the information about the device used}
\StringTok{  }\KeywordTok{select}\NormalTok{(-q)}

\NormalTok{merged_quas =}\StringTok{ }\NormalTok{merged_quas %>%}
\StringTok{  }\KeywordTok{group_by}\NormalTok{(RecordNo, a) %>%}
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{n =} \KeywordTok{n}\NormalTok{()) %>%}\StringTok{ }\NormalTok{dplyr::}\KeywordTok{filter}\NormalTok{(n <}\StringTok{ }\DecValTok{2}\NormalTok{) %>%}\StringTok{ }\NormalTok{dplyr::}\KeywordTok{select}\NormalTok{(-n) %>%}
\StringTok{  }\KeywordTok{ungroup}\NormalTok{() }\CommentTok{# moving out duplicates produced by Q4- and so on quesions}
\end{Highlighting}
\end{Shaded}

adding Q8 questions with quasi-ordinal scale

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# df_clean %>% colnames()}

\NormalTok{df_quas =}\StringTok{ }\NormalTok{df_clean %>%}\StringTok{ }\KeywordTok{select}\NormalTok{(RecordNo, Q8_v2_1:Q16)}

\CommentTok{# anti_join(df_quas, merged_quas, by = "RecordNo") %>% View # 180 respondents are missing}

\NormalTok{df_merged_quas =}\StringTok{ }\KeywordTok{inner_join}\NormalTok{(df_quas, merged_quas, }\DataTypeTok{by =} \StringTok{"RecordNo"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: Column `RecordNo` has different attributes on LHS and RHS of join
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# df_merged_quas %>% View}
\end{Highlighting}
\end{Shaded}

\section{FIXME: think about how to adjust number of
users}\label{fixme-think-about-how-to-adjust-number-of-users}

\section{UPD: simple decision might be just to throw away software which
is used less than by 5 respondents in the
sample}\label{upd-simple-decision-might-be-just-to-throw-away-software-which-is-used-less-than-by-5-respondents-in-the-sample}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{pre_dist_multi =}\StringTok{ }\NormalTok{df_merged_quas %>%}\StringTok{ }\KeywordTok{select}\NormalTok{(-Occupation) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{group_by}\NormalTok{(a) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate_at}\NormalTok{(}\KeywordTok{vars}\NormalTok{(Q8_v2_1:Q16),}
            \KeywordTok{funs}\NormalTok{(}\StringTok{"agr"} \NormalTok{=}\StringTok{ }\KeywordTok{sum}\NormalTok{(.))) %>%}\StringTok{ }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{n =} \KeywordTok{n}\NormalTok{()) %>%}
\StringTok{  }\KeywordTok{mutate_at}\NormalTok{(}\KeywordTok{vars}\NormalTok{(Q8_v2_1_agr:Q16_agr),}
                   \KeywordTok{funs}\NormalTok{(}\StringTok{"norm"} \NormalTok{=}\StringTok{ }\NormalTok{. /}\StringTok{ }\NormalTok{n)) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{select}\NormalTok{(-}\KeywordTok{c}\NormalTok{(Q8_v2_1_agr:Q16_agr),}
         \NormalTok{-}\KeywordTok{c}\NormalTok{(Q8_v2_1:Q16))  %>%}
\StringTok{  }\NormalTok{dplyr::}\KeywordTok{rename}\NormalTok{(}\DataTypeTok{respondents_quant =} \NormalTok{n)  %>%}
\StringTok{  }\KeywordTok{filter}\NormalTok{(}\KeywordTok{row_number}\NormalTok{() ==}\StringTok{ }\DecValTok{1}\NormalTok{)  %>%}
\StringTok{  }\KeywordTok{ungroup}\NormalTok{() %>%}\StringTok{  }\KeywordTok{arrange}\NormalTok{(}\KeywordTok{desc}\NormalTok{(respondents_quant)) }\CommentTok{# %>% View}


\CommentTok{# pre_dist_multi$a %>% as.factor() %>% summary()}
\NormalTok{pre_dist_multi %>%}\StringTok{ }\NormalTok{View}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{pre_dist_occupations =}\StringTok{ }\NormalTok{df_merged_quas %>%}
\StringTok{  }\KeywordTok{gather}\NormalTok{(key, val, Occupation) %>%}\StringTok{ }
\StringTok{  }\NormalTok{dplyr::}\KeywordTok{select}\NormalTok{(a, key, val) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{group_by}\NormalTok{(a, val) %>%}\StringTok{ }\KeywordTok{tally}\NormalTok{() %>%}
\StringTok{  }\KeywordTok{spread}\NormalTok{(val, n, }\DataTypeTok{fill =} \DecValTok{0}\NormalTok{)  %>%}
\StringTok{  }\KeywordTok{ungroup}\NormalTok{()}


\CommentTok{# pre_dist_occupations$a %>% as.factor() %>% summary()}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{pre_dist_multi_final =}\StringTok{ }\KeywordTok{inner_join}\NormalTok{(pre_dist_multi, pre_dist_occupations, }\DataTypeTok{by =} \StringTok{"a"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\section{Pre-MDS data preparation}\label{pre-mds-data-preparation}

Scaling Before MDS, results are even worse \# UPD: scaling should be
accomplished for all of the vars, another fix

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{pre_dist_multi_final %>%}\StringTok{ }\KeywordTok{colnames}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "RecordNo"                                           
##  [2] "a"                                                  
##  [3] "respondents_quant"                                  
##  [4] "Q8_v2_1_agr_norm"                                   
##  [5] "Q8_v2_2_agr_norm"                                   
##  [6] "Q8_v2_3_agr_norm"                                   
##  [7] "Q8_v2_4_agr_norm"                                   
##  [8] "Q9_agr_norm"                                        
##  [9] "Q10_agr_norm"                                       
## [10] "Q11_agr_norm"                                       
## [11] "Q12_agr_norm"                                       
## [12] "Q13_agr_norm"                                       
## [13] "Q14_agr_norm"                                       
## [14] "Q15_agr_norm"                                       
## [15] "Q16_agr_norm"                                       
## [16] "Business and administration"                        
## [17] "Business, economics, and administration"            
## [18] "Chief executives, senior officials, and legislators"
## [19] "General management"                                 
## [20] "Health"                                             
## [21] "Hospitality and retail"                             
## [22] "ICT"                                                
## [23] "Legal, social, and cultural"                        
## [24] "Science and engineering"                            
## [25] "Teaching"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{## scaling only for occupations since they represent absolute frequencies}

\NormalTok{pre_dist_multi_final[,-}\KeywordTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{:}\DecValTok{16}\NormalTok{)] %<>%}\StringTok{ }\KeywordTok{apply}\NormalTok{(}\DecValTok{2}\NormalTok{, function(X) }\KeywordTok{scale}\NormalTok{(X))}


\CommentTok{# pre_dist_multi_final[,-c(1:3)] %<>% apply(2, function(X) scale(X, center = FALSE))}

\NormalTok{pre_dist_multi_final %>%}\StringTok{ }\NormalTok{View}
\NormalTok{## pre_dist_multi_final$a %>% as.factor() %>% summary()}
\end{Highlighting}
\end{Shaded}

\subsection{MDS}\label{mds}

Labels to put on the map

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{pre_dist_multi_final %>%}\StringTok{ }\NormalTok{colnames}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "RecordNo"                                           
##  [2] "a"                                                  
##  [3] "respondents_quant"                                  
##  [4] "Q8_v2_1_agr_norm"                                   
##  [5] "Q8_v2_2_agr_norm"                                   
##  [6] "Q8_v2_3_agr_norm"                                   
##  [7] "Q8_v2_4_agr_norm"                                   
##  [8] "Q9_agr_norm"                                        
##  [9] "Q10_agr_norm"                                       
## [10] "Q11_agr_norm"                                       
## [11] "Q12_agr_norm"                                       
## [12] "Q13_agr_norm"                                       
## [13] "Q14_agr_norm"                                       
## [14] "Q15_agr_norm"                                       
## [15] "Q16_agr_norm"                                       
## [16] "Business and administration"                        
## [17] "Business, economics, and administration"            
## [18] "Chief executives, senior officials, and legislators"
## [19] "General management"                                 
## [20] "Health"                                             
## [21] "Hospitality and retail"                             
## [22] "ICT"                                                
## [23] "Legal, social, and cultural"                        
## [24] "Science and engineering"                            
## [25] "Teaching"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{labels_to_select =}\StringTok{ }\NormalTok{software_cleaned$a2[!(software_cleaned$a2 %in%}\StringTok{ }\NormalTok{(software_aggregated %>%}\StringTok{ }\KeywordTok{top_n}\NormalTok{(}\DecValTok{9}\NormalTok{, n) %$%}\StringTok{ }\NormalTok{a2))][}\DecValTok{1}\NormalTok{:}\DecValTok{50}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(skimr)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Attaching package: 'skimr'
\end{verbatim}

\begin{verbatim}
## The following objects are masked from 'package:dplyr':
## 
##     contains, ends_with, everything, matches, num_range, one_of,
##     starts_with
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# config}
\KeywordTok{skim_with}\NormalTok{(}\DataTypeTok{numeric =} \KeywordTok{list}\NormalTok{(}\DataTypeTok{p0 =} \OtherTok{NULL}\NormalTok{, }\DataTypeTok{p25 =} \OtherTok{NULL}\NormalTok{, }\DataTypeTok{p75 =} \OtherTok{NULL}\NormalTok{, }\DataTypeTok{p100 =} \OtherTok{NULL}\NormalTok{, }\DataTypeTok{missing =} \OtherTok{NULL}\NormalTok{, }\DataTypeTok{complete =} \OtherTok{NULL}\NormalTok{))}

\KeywordTok{skim}\NormalTok{(pre_dist_multi_final[,-}\KeywordTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{16}\NormalTok{:}\KeywordTok{ncol}\NormalTok{(pre_dist_multi_final))] %>%}\StringTok{ }\KeywordTok{select}\NormalTok{(-respondents_quant))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Skim summary statistics
##  n obs: 873 
##  n variables: 13 
## 
## -- Variable type:character ------------------------------------------------
##  variable missing complete   n min max empty n_unique
##         a       0      873 873   1  55     0      873
## 
## -- Variable type:numeric --------------------------------------------------
##          variable   n mean   sd  p50     hist
##      Q10_agr_norm 873 2.41 0.73 2.6  ▂▁▅▂▁▇▁▁
##      Q11_agr_norm 873 1.98 1.01 2    ▇▁▃▁▁▃▁▂
##      Q12_agr_norm 873 2.43 0.71 2.36 ▂▁▇▂▁▇▁▁
##      Q13_agr_norm 873 2.18 1.04 2    ▇▁▅▂▁▅▁▃
##      Q14_agr_norm 873 2    0.85 2    ▇▂▇▁▁▅▁▁
##      Q15_agr_norm 873 2.04 0.78 2    ▅▂▇▂▁▅▁▁
##      Q16_agr_norm 873 2.08 0.8  2    ▅▁▇▂▁▅▁▁
##  Q8_v2_1_agr_norm 873 4.56 1.58 5    ▂▂▅▅▂▇▆▃
##  Q8_v2_2_agr_norm 873 2.76 1.54 2.8  ▇▆▇▃▁▂▁▁
##  Q8_v2_3_agr_norm 873 2.18 1.36 2    ▇▅▃▁▁▁▁▁
##  Q8_v2_4_agr_norm 873 1.57 1    1    ▇▂▁▁▁▁▁▁
##       Q9_agr_norm 873 2.02 0.84 2    ▇▁▆▂▁▇▁▁
\end{verbatim}

Skim summary statistics\\
n obs: 873\\
n variables: 13

Variable type: character

\begin{longtable}[c]{@{}cccccccc@{}}
\toprule
variable & missing & complete & n & min & max & empty &
n\_unique\tabularnewline
\midrule
\endhead
a & 0 & 873 & 873 & 1 & 55 & 0 & 873\tabularnewline
\bottomrule
\end{longtable}

Variable type: numeric

\begin{longtable}[c]{@{}cccccc@{}}
\toprule
variable & n & mean & sd & p50 & hist\tabularnewline
\midrule
\endhead
Q10\_agr\_norm & 873 & 2.41 & 0.73 & 2.6 & ▂▁▅▂▁▇▁▁\tabularnewline
Q11\_agr\_norm & 873 & 1.98 & 1.01 & 2 & ▇▁▃▁▁▃▁▂\tabularnewline
Q12\_agr\_norm & 873 & 2.43 & 0.71 & 2.36 & ▂▁▇▂▁▇▁▁\tabularnewline
Q13\_agr\_norm & 873 & 2.18 & 1.04 & 2 & ▇▁▅▂▁▅▁▃\tabularnewline
Q14\_agr\_norm & 873 & 2 & 0.85 & 2 & ▇▂▇▁▁▅▁▁\tabularnewline
Q15\_agr\_norm & 873 & 2.04 & 0.78 & 2 & ▅▂▇▂▁▅▁▁\tabularnewline
Q16\_agr\_norm & 873 & 2.08 & 0.8 & 2 & ▅▁▇▂▁▅▁▁\tabularnewline
Q8\_v2\_1\_agr\_norm & 873 & 4.56 & 1.58 & 5 & ▂▂▅▅▂▇▆▃\tabularnewline
Q8\_v2\_2\_agr\_norm & 873 & 2.76 & 1.54 & 2.8 & ▇▆▇▃▁▂▁▁\tabularnewline
Q8\_v2\_3\_agr\_norm & 873 & 2.18 & 1.36 & 2 & ▇▅▃▁▁▁▁▁\tabularnewline
Q8\_v2\_4\_agr\_norm & 873 & 1.57 & 1 & 1 & ▇▂▁▁▁▁▁▁\tabularnewline
Q9\_agr\_norm & 873 & 2.02 & 0.84 & 2 & ▇▁▆▂▁▇▁▁\tabularnewline
\bottomrule
\end{longtable}

\subsection{\texorpdfstring{``euclidean'' `maximum' `manhattan'
`minkowski' `canberra'
`binary'}{euclidean maximum manhattan minkowski canberra binary}}\label{euclidean-maximum-manhattan-minkowski-canberra-binary}

\section{manhattan is good}\label{manhattan-is-good}

\section{canberra - great division}\label{canberra---great-division}

\subsection{only for survey items}\label{only-for-survey-items}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{p =}\StringTok{ }\KeywordTok{flexible_clustering}\NormalTok{(pre_dist_multi_final, }\StringTok{"canberra"}\NormalTok{, }\DecValTok{5}\NormalTok{, }\DecValTok{12}\NormalTok{, }\DecValTok{11}\NormalTok{)}

\KeywordTok{ggsave}\NormalTok{(}\DataTypeTok{device=}\StringTok{"png"}\NormalTok{, }\DataTypeTok{plot=}\NormalTok{p, }\DataTypeTok{filename=}\StringTok{"./plots/kmeans_canberra.png"}\NormalTok{,}
       \DataTypeTok{scale=}\NormalTok{.}\DecValTok{2}\NormalTok{, }\DataTypeTok{height =} \DecValTok{1024}\NormalTok{, }\DataTypeTok{width =} \DecValTok{1024}\NormalTok{, }\DataTypeTok{units =} \StringTok{"mm"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\end{document}
